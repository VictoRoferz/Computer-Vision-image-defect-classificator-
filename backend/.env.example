# ============================================================
# PCB Defect Classification System - Environment Configuration
# ============================================================
# Copy this file to .env and configure for your environment
# For Mac testing: servers run on localhost with different ports
# For Raspberry Pi deployment: adjust network settings accordingly

# ============================================================
# General Settings
# ============================================================
LOG_LEVEL=INFO  # DEBUG, INFO, WARNING, ERROR, CRITICAL

# ============================================================
# Server 1: Camera Service (Raspberry Pi 3 Simulator)
# Port: 8001
# ============================================================

# Camera Configuration
SERVER1_USE_CAMERA=false  # Set to false for Mac testing without camera
SERVER1_CAMERA_INDEX=0    # 0 = default camera, 1+ = external USB cameras
SERVER1_CAMERA_WIDTH=1920
SERVER1_CAMERA_HEIGHT=1080
SERVER1_CAMERA_FPS=30

# Upload Configuration
SERVER1_UPLOAD_TIMEOUT=30  # Timeout in seconds
SERVER1_UPLOAD_RETRIES=3   # Number of retry attempts
SERVER1_CLEANUP=true       # Clean up local files after successful upload

# ============================================================
# Server 2: Label Studio Service (Raspberry Pi 5 Simulator)
# Port: 8002
# ============================================================

# Storage Configuration
SERVER2_USE_CONTENT_ADDRESSING=true  # SHA256-based deduplication
MAX_UPLOAD_SIZE_MB=50

# ============================================================
# Label Studio Configuration
# Port: 8080 (UI accessible at http://localhost:8080)
# ============================================================

# REQUIRED: Get API key after first Label Studio login
# 1. Start services: docker-compose up
# 2. Open http://localhost:8080
# 3. Create account or login
# 4. Go to Account & Settings > Access Token
# 5. Copy token and paste below
LABELSTUDIO_API_KEY=

# Optional: Project Configuration
# Leave LABELSTUDIO_PROJECT_ID empty to auto-create project
LABELSTUDIO_PROJECT_ID=
LABELSTUDIO_PROJECT_NAME=PCB Defect Classification
LABELSTUDIO_AUTO_CREATE_PROJECT=true
LABELSTUDIO_ENABLE_WEBHOOKS=true

# Optional: Pre-configured credentials (for automated setup)
LABELSTUDIO_USERNAME=admin@example.com
LABELSTUDIO_PASSWORD=admin123
LABELSTUDIO_DISABLE_SIGNUP=false  # Set true in production

# Webhook Configuration
WEBHOOK_ENABLED=true

# ============================================================
# Development Settings
# ============================================================

# Set to true to enable hot reload (changes reflected immediately)
DEVELOPMENT_MODE=true

# ============================================================
# Production Settings (Raspberry Pi Deployment)
# ============================================================

# When deploying to actual Raspberry Pis:
# 1. Enable camera on RPi3:
#    SERVER1_USE_CAMERA=true
#
# 2. Set proper hostnames/IPs:
#    Replace 'server2' with actual RPi5 IP address
#
# 3. Security:
#    - Use strong passwords
#    - Enable HTTPS
#    - Restrict CORS origins
#    - Set LABELSTUDIO_DISABLE_SIGNUP=true
#
# 4. Performance:
#    - Adjust camera resolution based on needs
#    - Monitor storage usage
#    - Set up log rotation

# ============================================================
# Notes
# ============================================================
# - All services communicate via Docker network on Mac
# - Label Studio UI: http://localhost:8080
# - Server 1 API docs: http://localhost:8001/docs
# - Server 2 API docs: http://localhost:8002/docs
# - Data persisted in Docker volumes (pcb_server2_data, pcb_labelstudio_data)
